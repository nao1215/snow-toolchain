<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Inference (snow.Inference)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">snow</a> &#x00BB; Inference</nav><header class="odoc-preamble"><h1>Module <code><span>Inference</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-Inference_error"><a href="#exception-Inference_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Inference_error</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p>Type inference exceptions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_var_counter"><a href="#val-type_var_counter" class="anchor"></a><code><span><span class="keyword">val</span> type_var_counter : <span>int <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Type variable counter for generating unique type variables</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fresh_type_var"><a href="#val-fresh_type_var" class="anchor"></a><code><span><span class="keyword">val</span> fresh_type_var : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Ast/index.html#type-typ">Ast.typ</a></span></code></div><div class="spec-doc"><p>Generate a fresh type variable</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-substitution"><a href="#type-substitution" class="anchor"></a><code><span><span class="keyword">type</span> substitution</span><span> = <span><span>(int * <a href="../Ast/index.html#type-typ">Ast.typ</a>)</span> list</span></span></code></div><div class="spec-doc"><p>Substitution: mapping from type variables to types</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply_subst"><a href="#val-apply_subst" class="anchor"></a><code><span><span class="keyword">val</span> apply_subst : <span><span><span>(int * <a href="../Ast/index.html#type-typ">Ast.typ</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Ast/index.html#type-typ">Ast.typ</a></span></code></div><div class="spec-doc"><p>Apply substitution to a type</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compose_subst"><a href="#val-compose_subst" class="anchor"></a><code><span><span class="keyword">val</span> compose_subst : 
  <span><span><span>(int * <a href="../Ast/index.html#type-typ">Ast.typ</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(int * <a href="../Ast/index.html#type-typ">Ast.typ</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(int * <a href="../Ast/index.html#type-typ">Ast.typ</a>)</span> list</span></span></code></div><div class="spec-doc"><p>Compose two substitutions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-free_type_vars"><a href="#val-free_type_vars" class="anchor"></a><code><span><span class="keyword">val</span> free_type_vars : <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Get free type variables in a type</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-occurs_check"><a href="#val-occurs_check" class="anchor"></a><code><span><span class="keyword">val</span> occurs_check : <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Occurs check: prevent infinite types</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unify"><a href="#val-unify" class="anchor"></a><code><span><span class="keyword">val</span> unify : <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(int * <a href="../Ast/index.html#type-typ">Ast.typ</a>)</span> list</span></span></code></div><div class="spec-doc"><p>Unification algorithm: find substitution that makes two types equal</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-type_scheme"><a href="#type-type_scheme" class="anchor"></a><code><span><span class="keyword">type</span> type_scheme</span><span> = </span><span>{</span></code><ol><li id="type-type_scheme.quantified_vars" class="def record field anchored"><a href="#type-type_scheme.quantified_vars" class="anchor"></a><code><span>quantified_vars : <span>int list</span>;</span></code></li><li id="type-type_scheme.scheme_type" class="def record field anchored"><a href="#type-type_scheme.scheme_type" class="anchor"></a><code><span>scheme_type : <a href="../Ast/index.html#type-typ">Ast.typ</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Type scheme for polymorphism</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mono_scheme"><a href="#val-mono_scheme" class="anchor"></a><code><span><span class="keyword">val</span> mono_scheme : <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-type_scheme">type_scheme</a></span></code></div><div class="spec-doc"><p>Create monomorphic type scheme</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generalize"><a href="#val-generalize" class="anchor"></a><code><span><span class="keyword">val</span> generalize : <span><span>int list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-type_scheme">type_scheme</a></span></code></div><div class="spec-doc"><p>Generalize a type: bind free type variables</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-instantiate"><a href="#val-instantiate" class="anchor"></a><code><span><span class="keyword">val</span> instantiate : <span><a href="#type-type_scheme">type_scheme</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Ast/index.html#type-typ">Ast.typ</a></span></code></div><div class="spec-doc"><p>Instantiate a type scheme with fresh type variables</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-type_env"><a href="#type-type_env" class="anchor"></a><code><span><span class="keyword">type</span> type_env</span><span> = <span><span>(string * <a href="#type-type_scheme">type_scheme</a>)</span> list</span></span></code></div><div class="spec-doc"><p>Type environment with type schemes</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_env"><a href="#val-empty_env" class="anchor"></a><code><span><span class="keyword">val</span> empty_env : <span><span class="type-var">'a</span> list</span></span></code></div><div class="spec-doc"><p>Empty type environment</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extend_env"><a href="#val-extend_env" class="anchor"></a><code><span><span class="keyword">val</span> extend_env : <span><span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> list</span></span></code></div><div class="spec-doc"><p>Add binding to environment</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lookup_env"><a href="#val-lookup_env" class="anchor"></a><code><span><span class="keyword">val</span> lookup_env : <span><span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> option</span></span></code></div><div class="spec-doc"><p>Look up variable in environment</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-env_free_vars"><a href="#val-env_free_vars" class="anchor"></a><code><span><span class="keyword">val</span> env_free_vars : <span><span><span>(<span class="type-var">'a</span> * <a href="#type-type_scheme">type_scheme</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>int list</span></span></code></div><div class="spec-doc"><p>Get free type variables in environment</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reset_type_vars"><a href="#val-reset_type_vars" class="anchor"></a><code><span><span class="keyword">val</span> reset_type_vars : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Reset type variable counter for testing</p></div></div></div></body></html>
