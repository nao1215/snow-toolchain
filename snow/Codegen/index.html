<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Codegen (snow.Codegen)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">snow</a> &#x00BB; Codegen</nav><header class="odoc-preamble"><h1>Module <code><span>Codegen</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec exception anchored" id="exception-Codegen_error"><a href="#exception-Codegen_error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Codegen_error</span> <span class="keyword">of</span> string</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-codegen_context"><a href="#type-codegen_context" class="anchor"></a><code><span><span class="keyword">type</span> codegen_context</span><span> = </span><span>{</span></code><ol><li id="type-codegen_context.context" class="def record field anchored"><a href="#type-codegen_context.context" class="anchor"></a><code><span>context : <span class="xref-unresolved">Llvm</span>.llcontext;</span></code></li><li id="type-codegen_context.module_" class="def record field anchored"><a href="#type-codegen_context.module_" class="anchor"></a><code><span>module_ : <span class="xref-unresolved">Llvm</span>.llmodule;</span></code></li><li id="type-codegen_context.builder" class="def record field anchored"><a href="#type-codegen_context.builder" class="anchor"></a><code><span>builder : <span class="xref-unresolved">Llvm</span>.llbuilder;</span></code></li><li id="type-codegen_context.named_values" class="def record field anchored"><a href="#type-codegen_context.named_values" class="anchor"></a><code><span>named_values : <span><span>(string, <span class="xref-unresolved">Llvm</span>.llvalue)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span>;</span></code></li><li id="type-codegen_context.functions" class="def record field anchored"><a href="#type-codegen_context.functions" class="anchor"></a><code><span>functions : <span><span>(string, <span class="xref-unresolved">Llvm</span>.llvalue)</span> <span class="xref-unresolved">Stdlib</span>.Hashtbl.t</span>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>Code generation context</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_context"><a href="#val-create_context" class="anchor"></a><code><span><span class="keyword">val</span> create_context : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-codegen_context">codegen_context</a></span></code></div><div class="spec-doc"><p>Create new codegen context</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-llvm_type_of_typ"><a href="#val-llvm_type_of_typ" class="anchor"></a><code><span><span class="keyword">val</span> llvm_type_of_typ : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.lltype</span></code></div><div class="spec-doc"><p>Convert SNOW type to LLVM type</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_literal"><a href="#val-codegen_literal" class="anchor"></a><code><span><span class="keyword">val</span> codegen_literal : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM constant for literal values</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_expr"><a href="#val-codegen_expr" class="anchor"></a><code><span><span class="keyword">val</span> codegen_expr : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for expressions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_binop"><a href="#val-codegen_binop" class="anchor"></a><code><span><span class="keyword">val</span> codegen_binop : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-binop">Ast.binop</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Llvm</span>.llvalue <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Llvm</span>.llvalue <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_if"><a href="#val-codegen_if" class="anchor"></a><code><span><span class="keyword">val</span> codegen_if : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_function"><a href="#val-codegen_function" class="anchor"></a><code><span><span class="keyword">val</span> codegen_function : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Ast/index.html#type-param">Ast.param</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-typ">Ast.typ</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for a function definition</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_call"><a href="#val-codegen_call" class="anchor"></a><code><span><span class="keyword">val</span> codegen_call : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Ast/index.html#type-expr">Ast.expr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for function call</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_match"><a href="#val-codegen_match" class="anchor"></a><code><span><span class="keyword">val</span> codegen_match : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Ast/index.html#type-match_arm">Ast.match_arm</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for match expressions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_pattern_match"><a href="#val-codegen_pattern_match" class="anchor"></a><code><span><span class="keyword">val</span> codegen_pattern_match : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Llvm</span>.llvalue <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-pattern">Ast.pattern</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for pattern matching</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_while"><a href="#val-codegen_while" class="anchor"></a><code><span><span class="keyword">val</span> codegen_while : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for while loops</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_for"><a href="#val-codegen_for" class="anchor"></a><code><span><span class="keyword">val</span> codegen_for : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for for loops</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_block"><a href="#val-codegen_block" class="anchor"></a><code><span><span class="keyword">val</span> codegen_block : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Ast/index.html#type-expr">Ast.expr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for block expressions</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_unop"><a href="#val-codegen_unop" class="anchor"></a><code><span><span class="keyword">val</span> codegen_unop : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-unop">Ast.unop</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for unary operations</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_array_access"><a href="#val-codegen_array_access" class="anchor"></a><code><span><span class="keyword">val</span> codegen_array_access : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for array access</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_field_access"><a href="#val-codegen_field_access" class="anchor"></a><code><span><span class="keyword">val</span> codegen_field_access : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for field access</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_struct"><a href="#val-codegen_struct" class="anchor"></a><code><span><span class="keyword">val</span> codegen_struct : 
  <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../Ast/index.html#type-struct_field_init">Ast.struct_field_init</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for struct construction</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_tuple"><a href="#val-codegen_tuple" class="anchor"></a><code><span><span class="keyword">val</span> codegen_tuple : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Ast/index.html#type-expr">Ast.expr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for tuple construction</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_array"><a href="#val-codegen_array" class="anchor"></a><code><span><span class="keyword">val</span> codegen_array : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../Ast/index.html#type-expr">Ast.expr</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for array construction</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_some"><a href="#val-codegen_some" class="anchor"></a><code><span><span class="keyword">val</span> codegen_some : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for Option Some</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_none"><a href="#val-codegen_none" class="anchor"></a><code><span><span class="keyword">val</span> codegen_none : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for Option None</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_ok"><a href="#val-codegen_ok" class="anchor"></a><code><span><span class="keyword">val</span> codegen_ok : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for Result Ok</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_err"><a href="#val-codegen_err" class="anchor"></a><code><span><span class="keyword">val</span> codegen_err : <span><a href="#type-codegen_context">codegen_context</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llvalue</span></code></div><div class="spec-doc"><p>Generate LLVM code for Result Err</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-codegen_program"><a href="#val-codegen_program" class="anchor"></a><code><span><span class="keyword">val</span> codegen_program : <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Llvm</span>.llmodule</span></code></div><div class="spec-doc"><p>Generate LLVM code for a complete program</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_llvm_ir"><a href="#val-generate_llvm_ir" class="anchor"></a><code><span><span class="keyword">val</span> generate_llvm_ir : <span><a href="../Ast/index.html#type-expr">Ast.expr</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Generate LLVM IR string for an expression</p></div></div></div></body></html>
